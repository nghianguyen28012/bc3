<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>T·∫°o ƒë·ªÅ th·ªß c√¥ng</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Roboto', sans-serif;
  margin: 0; padding: 0;
  background: #f7f9fc;
}
header {
  background: #4f46e5;
  color: #fff;
  padding: 15px 30px;
  font-size: 20px;
  font-weight: bold;
}
.container {
  max-width: 1100px;
  margin: 20px auto;
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
h1 {
  text-align: center;
  margin-bottom: 15px;
}
input[type="text"] {
  width: 50%;
  padding: 10px;
  font-size: 16px;
  margin-bottom: 20px;
  border-radius: 6px;
  border: 1px solid #ccc;
}
.question-list {
  max-height: 450px;
  overflow-y: auto;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 10px;
}
.question {
  background: #f9fafb;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 10px;
  margin-bottom: 12px;
  display: flex;
  gap: 10px;
}
.question:hover {
  background: #eef2ff;
}
.actions {
  text-align: center;
  margin-top: 20px;
}
button {
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  margin: 0 10px;
  transition: 0.3s;
}
.confirm {
  background: linear-gradient(45deg, #4f46e5, #6366f1);
  color: #fff;
}
.cancel {
  background: #e11d48;
  color: #fff;
}
</style>
</head>
<body>
<header>Onluyen Edmicro - T·∫°o ƒë·ªÅ th·ªß c√¥ng</header>
<div class="container">
  <h1>‚úçÔ∏è T·∫°o ƒë·ªÅ th·ªß c√¥ng</h1>
  <label><strong>T√™n ƒë·ªÅ:</strong></label>
  <input type="text" id="examName" placeholder="Nh·∫≠p t√™n ƒë·ªÅ thi" />
  <div class="question-list" id="questionList"></div>
  <div class="actions">
    <button class="confirm" onclick="confirmCustom()">‚úÖ X√°c nh·∫≠n t·∫°o ƒë·ªÅ</button>
    <button class="cancel" onclick="window.history.back()">üîô Quay l·∫°i</button>
  </div>
</div>

<script>
let allQuestions = [];

fetch('gvchoncautaode.php')
.then(res => res.json())
.then(data => {
  if(!data || data.length===0){
    alert("Kh√¥ng c√≥ c√¢u h·ªèi trong DB");
    return;
  }
  allQuestions = data;
  const container = document.getElementById('questionList');
  data.forEach((q,i)=>{
    const div = document.createElement('div');
    div.className='question';
    div.innerHTML = `
      <input type="checkbox" value="${i}">
      <div>
        <strong>C√¢u ${i+1}:</strong> ${q.noi_dung}
        <ul>
          <li>A. ${q.dapan_a}</li>
          <li>B. ${q.dapan_b}</li>
          <li>C. ${q.dapan_c}</li>
          <li>D. ${q.dapan_d}</li>
        </ul>
      </div>`;
    container.appendChild(div);
  });
});

function confirmCustom(){
  const name = document.getElementById('examName').value.trim();
  if(name===""){ alert("Vui l√≤ng nh·∫≠p t√™n ƒë·ªÅ!"); return; }
  const checkboxes = document.querySelectorAll('input[type=checkbox]:checked');
  if(checkboxes.length===0){ alert("Ch·ªçn √≠t nh·∫•t 1 c√¢u h·ªèi!"); return; }
  const selected = [];
  checkboxes.forEach(cb=>{
    selected.push(allQuestions[parseInt(cb.value)]);
  });
  const deThi = { ten_de:name, cauhoi_json:selected };
  localStorage.setItem('deThi', JSON.stringify(deThi));
  alert("ƒê·ªÅ th·ªß c√¥ng ƒë√£ t·∫°o th√†nh c√¥ng!");
  window.location.href = "lb.html";
}
</script>
</body>
</html>
